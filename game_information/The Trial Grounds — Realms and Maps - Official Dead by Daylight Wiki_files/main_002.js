var vt=Object.defineProperty;var St=(e,t,n)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var m=(e,t,n)=>St(e,typeof t!="symbol"?t+"":t,n);const kt="adengadinfo",Tt="adengadsizeinfo",bt=e=>e.type==="clicked"||e.type==="force-close";var Ie=(e=>(e.BIDDER_RESPONSE="bid_response",e))(Ie||{}),re=(e=>(e.ADENGPAGESTATUS="adengpagestatus",e))(re||{}),Ce=(e=>(e.IDENTITY_INFO="identity_info",e))(Ce||{}),ye=(e=>(e.LABRADOR_KEYVALUES="labrador_keyvalues",e))(ye||{}),f=(e=>(e.AE_FIRST_LINE_EXEC="ae.firstLineExec",e.AE_AFTER_INIT_PLUGINS="ae.afterInitPlugins",e.AE_AFTER_GPT_WRAPPER_INIT="ae.afterGptWrapperInit",e.AE_AD_ENGINE_INIT="ae.adEngineInit",e.AE_ON_BIDDERS_INIT="ae.onBiddersInit",e.AE_CONFIG_CALLBACK_STARTED="ae.beforeAuction.configCallbackStarted",e.AE_CONFIG_CALLBACK_COMPLETE="ae.beforeAuction.configCallbackComplete",e.AE_AUCTION_START="ae.auctionStart",e.AE_AUCTION_START_A9_START="ae.auctionStart.a9.bidStart",e.AE_AUCTION_END="ae.auctionEnd",e.AE_BEFORE_FIRST_CALL_ADS_REQUEST="ae.beforeFirstCallAdsRequest",e.AE_FIRST_RENDER_CYCLE_COMPLETE="ae.firstRenderCycleComplete",e.AE_GPT_SLOT_REQUESTED_INITIAL="ae.gpt.slotRequested.initial",e.AE_GPT_SLOT_RESPONSE_RECEIVED_INITIAL="ae.gpt.slotResponseReceived.initial",e.AE_GPT_SLOT_RENDERED_ENDED_INITIAL="ae.gpt.slotRenderEnded.initial",e.AE_GPT_SLOT_SLOT_ONLOAD_INITIAL="ae.gpt.slotOnload.initial",e))(f||{}),z=(e=>(e.AE_AUCTION_DURATION_A9_BID_TOTAL_TIME="ae.d.auctionDuration.a9.bidTotalTime",e.AE_AUCTION_DURATION="ae.d.auctionDuration",e.AE_DURATION_TO_BID="ae.d.firstLineExec_to_auctionStart",e.AE_CONFIG_CALLBACK_DURATION="ae.d.configCallbackDuration",e))(z||{});const V="adengloadtimes";var l=(e=>(e.SLOT_REQUESTED="requested",e.SLOT_RENDERED="rendered",e.AE_INIT="init",e.VENDOR_TIME_UPDATE="vendor_time_update",e.CREATIVE_RENDERED="creative_rendered",e.PERFORMANCE_MARK="performance_mark",e))(l||{}),oe=(e=>(e.TRACKING_EVENT="trackingevent",e))(oe||{}),Re=(e=>(e.SHORT_LIVED_TRACKING_EVENT="shortlivedtrackingevent",e))(Re||{}),Ne=(e=>(e.COMPONENT_PERFORMANCE_EVENT="component_performance",e))(Ne||{}),Oe=(e=>(e.RECOMMENDATION_EVENT="recommendation",e))(Oe||{}),d=(e=>(e.P1="p1",e.P2="p2",e.P3="p3",e.P4="p4",e))(d||{}),ie=(e=>(e.PAGE_LOAD="page_load",e))(ie||{}),I=(e=>(e.REQUEST="request",e.BEACON="beacon",e.SESSION="session",e.PAGEVIEW="pageview",e))(I||{}),P=(e=>(e.YES="yes",e.NO="no",e.NOT_APPLICABLE="",e))(P||{}),Pe=(e=>(e.ERROR_NO_TIER_PROVIDED="-2",e.ERROR_DISABLED_TIERS="-1",e.TIER_2="2",e.TIER_3="3",e.TIER_4="4",e))(Pe||{}),De=(e=>(e.FANDOM="fandom",e.METACRITIC="metacritic",e.GAMESPOT="gamespot",e.TVGUIDE="tvguide",e.GAMEFAQS="gamefaqs",e.COMICVINE="comicvine",e.UNKNOWN="unknown",e))(De||{}),Le=(e=>(e.UCP_DESKTOP="ucp_desktop",e.UCP_MOBILE="ucp_mobile",e.FANDOM_MOBILE="fandom_mobile",e.FANDOM_DESKTOP="fandom_desktop",e.FEEDS="feeds",e.TRIVIA="trivia",e.CANONICAL_PAGES="canonical-pages",e.METACRITIC_MOBILE="metacritic_neutron_mobile",e.METACRITIC_DESKTOP="metacritic_neutron_desktop",e.RESPONSIVE="responsive",e.UNKNOWN="unknown",e))(Le||{});const At=()=>{};function ee(e){e.cmd??(e.cmd=[]);const t=[...e.cmd];e.cmd.push=(...n)=>{for(const r of n)r(e);return 0};for(const n of t)n(e)}function It(e,t){const n=[...e];e.push=(...r)=>(r.forEach(t),0),n.forEach(t),e.length=0}const Ct=e=>{const t=("; "+document.cookie).split("; "+e+"=");return t.length>=2?t.pop().split(";").shift():null},Be=e=>e!=null&&e.length?` domain=${e};`:"",yt=(e,t,n)=>{const r=new Date;r.setTime(r.getTime()+n.expires*1e3),document.cookie=`${e}=${t};${Be(n.domain)} path=${n.path}; expires=${r.toUTCString()}`},Rt=(e,t)=>{document.cookie=`${e}=;${Be(t.domain)} path=${t.path}; expires=Thu, 01 Jan 1970 00:00:00 GMT`},D={set:yt,get:Ct,delete:Rt};function Nt(e){return((e*100>>>0)/4294967296*100|0)+1}function xe(e){let t=2654435769;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)>>>0;return t^=t>>>16,t=Math.imul(t,2246822507)>>>0,t^=t>>>13,t=Math.imul(t,3266489909)>>>0,t^=t>>>16,Nt(t)}const Me=()=>{const e=window.location.hostname,t=e.split(".");return t.length<2?e:`.${t[t.length-2]}.${t[t.length-1]}`};async function $e(e,t=1e3,n={}){const r=new AbortController,o=setTimeout(()=>r.abort("The request has timed out"),t),i=await fetch(e,{signal:r.signal,...n});return clearTimeout(o),i}const Ue="app";function se(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.odyssey)==null?void 0:t.platform)??Ue}function Fe(e){return new URLSearchParams(window.location.search).get(e)}function ae(e){const t=Fe(e);return Ot(e)&&t===""||t==="1"||t==="true"}function Ot(e){return new URLSearchParams(window.location.search).has(e)}const ce="",Ve=/^(?:(v\d+)-)?(\d{2})$/;function w(){let e=Fe("pf_pathfinder_force_bucket")??D.get("exp_bucket");const t=e==null?void 0:e.match(Ve);return t&&t.length>=3&&(e=t[2]),e??ce}function Pt(){const t=(D.get("exp_bucket")??"").match(Ve);return t&&t.length>=3&&t[1]?t[1]:ce}function Dt(){return D.get("exp_bucket_2")??ce}function Lt(e=window.fandomContext??null){var n;const t=(n=e==null?void 0:e.page)==null?void 0:n.monetizationTier;return typeof t=="number"?t.toString():Pe.ERROR_NO_TIER_PROVIDED}function Bt(){var e;return((e=window.fandomAds)==null?void 0:e.resetCount)??0}const ze=()=>{var e;return window.fandomHost??(window.fandomHost={cmd:[]}),(e=window.fandomHost).cmd??(e.cmd=[]),window.fandomHost};function C(e){ze().cmd.push(t=>{t.issueManager.handleIssue({...e,type:"error"})})}const xt="E035",Mt="E036",$t="E037",Ut="E038",Ft="E039",Vt="E041",zt="E042",Gt="E043",_e="E044",Ht="D021",qt="D022",Wt="D023",we="D100",jt="D101",Kt="D102";function M(){var e,t,n;return window.fandomTrack??(window.fandomTrack={q:[],cmd:[],registry:{}}),(e=window.fandomTrack).q??(e.q=[]),(t=window.fandomTrack).cmd??(t.cmd=[]),(n=window.fandomTrack).registry??(n.registry={}),window.fandomTrack}function W(e,t){M().q.push({event:e,payload:t})}function L(e){ze().cmd.push(t=>{t.issueManager.handleIssue({...e,type:"degradation"})})}function Qt(e,t){return new Promise((n,r)=>{setTimeout(()=>{let o=`Operation timed out after ${e}ms`;r(new Error(o))},e)})}function Jt(e,t,n){const r=Qt(t);return Promise.race([e,r])}function Yt(e=[],t){const n=e.flat().filter(r=>r.status==="rejected");if(n.length>0){for(const o of n)C({message:"Promise rejected",error:o.reason,priority:d.P3,code:Vt});let r=`${n.length} of ${e.length} promises were rejected.`;C({message:r,priority:d.P3,data:n,code:zt})}}async function Xt(e,t,n){const r=await Jt(Promise.allSettled(e),t);return Yt(r),r}const he="fandomConsentUpdate",Zt=(e=window,t=!0)=>{const n=()=>{var r;return e.fandomCmp!==void 0&&e.fandomCmp.ready&&(t?(r=e.fandomCmp.allowed)==null?void 0:r.ads:!0)};return new Promise(r=>{if(n())return r();const o=()=>{n()&&(e.removeEventListener(he,o),r())};e.addEventListener(he,o)})},Ee="fandomContextUpdate",en=(e=window)=>{const t=()=>{var n;return((n=e.fandomContext)==null?void 0:n.tracking)!==void 0&&e.fandomContext.tracking.pvNumber&&e.fandomContext.tracking.pvNumberGlobal&&e.fandomContext.tracking.pvUID};return new Promise(n=>{if(t())return n();const r=()=>{t()&&(e.removeEventListener(Ee,r),n())};e.addEventListener(Ee,r)})};function B(){var t;const e=(t=window.fandomAds)==null?void 0:t.deploymentEnvironment;return e==="production"||e==="canary"||e==="development"?e:"unknown"}const tn=/Mobile|iPhone|Android|Silk|Kindle|Windows Phone|KFAPWI|(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,nn=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i,rn=/iPad|Android(?!.*Mobile)/i,j=()=>{const e=window.navigator.userAgent;return rn.test(e)?"tablet":tn.test(e)||nn.test(e.substring(0,4))?"smartphone":"desktop"},on=e=>e.includes("Android")?"Android":"Linux",sn=()=>{const e=window.navigator.userAgent,[t=""]=e.match(/Win|Mac|Linux|Android|like Mac/)??[];switch(t){case"Win":return"Windows";case"Mac":return"OSX";case"Linux":return on(e);case"Android":return"Android";case"like Mac":return"iOS";default:return"unknown"}},Ge={chrome:void 0,safari:void 0,firefox:void 0,msie:void 0,trident:void 0};function an(e){return e in Ge}function cn(e){const t=new RegExp(`(${Object.keys(Ge).join("|")})\\/?\\s*(\\d+)`,"i"),n=e.match(t);if(!n||!n[1]||!n[2])return["",""];const r=n[1].toLowerCase(),o=Number.parseInt(n[2]);return!an(r)||Number.isNaN(o)?["",""]:[r,`${o}`]}function x(e,t){return`${e} ${t}`}function dn(e){const t=e.match(/\b(OPR|Edg)\/(\d+)/);if(!t||!t[1]||!t[2])return"";const n=t[1],r=Number.parseInt(t[2]);if(Number.isNaN(r))return"";let o;return n==="OPR"?o="Opera":o="Edge",x(o,`${r}`)}function un(e,t){const n=e.match(/version\/(\d+)/i),r=Number.parseInt((n==null?void 0:n[1])??"");return x("Safari",Number.isNaN(r)?t:`${r}`)}function gn(e,t){return`${e} ${t} -?`}function He(){const{appName:e,appVersion:t,userAgent:n}=navigator,[r,o]=cn(n);if(!r)return gn(e,t);switch(r){case"trident":return x("IE","11");case"chrome":return dn(n)||x("Chrome",o);case"safari":return un(n,o);case"msie":return x("MSIE",o);case"firefox":return x("Firefox",o)}return""}function ln(){typeof Promise.withResolvers!="function"&&(Promise.withResolvers=()=>{let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}})}const Q="ZZ",ve={country:Q,region:Q,continent:Q},mn="https://services.fandom.com/geoip/location",qe=async e=>{const t=e.get("Geo");if(t)try{return JSON.parse(decodeURIComponent(t))}catch(n){C({code:xt,message:"Error parsing Geo cookie",priority:d.P3,error:n});const r=Me();e.delete("Geo",{domain:r,path:"/"})}try{const n=await fetch(mn);if(!n.ok)return C({code:_e,message:`Invalid response from geoip service (HTTP ${n.status} ${n.statusText})`,priority:d.P2}),ve;const{country_code:r,region:o,continent_code:i}=await n.json();return{country:r,region:o,continent:i}}catch(n){return C({code:_e,message:"Error fetching geo from geoip service",priority:d.P2,error:n}),ve}},fn=(e,t)=>{if(!e.get("Geo")){const r=Me();e.set("Geo",encodeURIComponent(JSON.stringify(t)),{domain:r,path:"/",expires:365})}},pn=e=>{const t=Array.isArray(e)?e.map(o=>o&&o.toString().split(":")).filter(o=>o&&o.length>=2).reduce((o,i)=>(o[i[0]]=i[1],o),{}):{},n=o=>o!=null&&o.isActive?o.keyVal:o==null?void 0:o.defaultKeyVal,r=[];return{mark(o){const i=n(o);i&&!r.includes(i)&&r.push(i)},deprecatedMark:(o,i,s)=>{const c=s?i:100-i,u=`${o}_${s?"B":"A"}_${c}`,g=t[u]??u;r.includes(g)||r.push(g)},getLabradorKeyValues:()=>r}},F="non-",te="XX";function _n(e){return e.startsWith(F)?{value:e.replace(F,""),negated:!0}:{value:e,negated:!1}}function wn(e,t){return t.some(n=>e.includes(n.value)&&n.negated)}const hn=e=>{const t=e==null?void 0:e.toLowerCase();return n=>{const o=(n.d??n.devices??[]).map(i=>_n(i.toLowerCase()));return o.length===0||!t?!0:wn(t,o)?!1:o.some(i=>i.value===t!==i.negated)}};function En(e,t,n,r){return e.includes(`${F}${t}`)||e.includes(`${F}${t}-${n}`)||e.includes(`${F}${te}-${r}`)}function vn(e,t,n,r){return e.includes(te)||e.includes(`${te}-${r}`)||e.includes(t)||e.includes(`${t}-${n}`)}const Sn=e=>{const t=e.country,n=e.region,r=e.continent;return o=>{const i=o.r??o.regions??[];return i.length===0||En(i,t,n,r)?!1:vn(i,t,n,r)}},kn=e=>{try{const t=e.localStorage!==void 0&&e.localStorage!==null;return t&&(e.localStorage.setItem("__test__","test"),e.localStorage.removeItem("__test__")),t}catch{return!1}},Tn=(e,t,n)=>{const r=kn(n),o={getItem:a=>{try{return r?n.localStorage.getItem(a):null}catch(u){return L({message:"[package:instant-config] LocalStorage access error",error:u,priority:d.P3,code:we,data:{key:a,method:"getItem"}}),null}},setItem:(a,u)=>{try{r&&n.localStorage.setItem(a,u)}catch(g){L({message:"[package:instant-config] LocalStorage access error",error:g,priority:d.P3,code:we,data:{key:a,value:u,method:"setItem"}})}}},i=a=>a?a<Date.now():!0,s=a=>({data:a,ttl:Date.now()+t}),c=a=>i(a.ttl)?null:a.data;return{set:a=>{const u=s(a);o.setItem(e,JSON.stringify(u))},get:()=>{const a=o.getItem(e);return a?c(JSON.parse(a)):null}}};function bn(e){return{source:e.s,rules:{defaultKeyValue:e.r.k,ranges:e.r.r.map(t=>({start:t.s,end:t.e,keyValue:t.k}))}}}function An(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="object"}function We(e){const t=e.sampling??e.s;return typeof t=="number"&&t>0&&t<100?t:null}function je(e){return(e==null?void 0:e.bucketing)??((e==null?void 0:e.bu)!==void 0?bn(e.bu):void 0)}const Se=(e,t,n,r,o,i)=>{const s=e[n];if(An(s)){const c=s.find(a=>{const u=t.reduce((U,O)=>U&&O(a),!0),g=je(a);if(g&&i&&u){const O=i(g.source)(a);if(O)return o==null||o.mark(O),O.isActive}const E=We(a);if(E===null||!u||!r)return u;const $=r(a);return o&&o.deprecatedMark(n,E,$),$});return(c==null?void 0:c.v)??(c==null?void 0:c.value)}return s},In=async(e,t)=>{const n=e.instantConfig;if(n)return n;const r=`https://services.fandom.com/icbm/api/config?app=${t}&compact=true`,o=`https://script.wikia.nocookie.net/fandom-ae-assets/icbm/prod/icbm_state_${t}.json`,i=Tn(`instant-config-${t}`,6e4,e),s=await Cn(i)??await ke(r,i)??await ke(o)??{};return e.instantConfig=s,s},Cn=async e=>{try{const t=e.get();if(t)return JSON.parse(t)}catch(t){L({message:"[package:instant-config] unable to get cached config",priority:d.P3,code:jt,error:t});return}},ke=async(e,t)=>{try{const n=await $e(e,2e3);if(!n.ok)return;const r=await n.json();return r&&t&&t.set(JSON.stringify(r)),r}catch(n){L({message:"[package:instant-config] unable to fetch config",priority:d.P2,code:Kt,error:n,data:{url:e}});return}},yn=e=>t=>{const n=We(t);if(n===null)return!0;const r=Math.round(e()),o=Math.round(n);return r<o},Ke=e=>{var n;const t=Number(((n=e.fandomContext)==null?void 0:n.experimentBucket)??D.get("eb")??Math.floor(Math.random()*100));return e.fandomContext=e.fandomContext||{},e.fandomContext.experimentBucket=t,()=>t},Rn=()=>Number(w()),Te=e=>t=>{var i;const n=je(t);if(!((i=n==null?void 0:n.rules)!=null&&i.ranges))return;const r=Math.round(e()),o=n.rules.ranges.find(s=>r>=s.start&&r<=s.end);return{isActive:!!o,defaultKeyVal:n.rules.defaultKeyValue,keyVal:o==null?void 0:o.keyValue}};function Nn(e){return t=>{switch(t){case"eb":return Te(Ke(e));case"exp_bucket":return Te(Rn);default:throw new Error(`Unknown bucketing source: ${t}`)}}}const On=({device:e,geo:t})=>[hn(e),Sn(t)];function Pn(e){if(e==="true"||e==="false")return e==="true";const t=parseInt(e,10);if(e===`${t}`)return t;try{return JSON.parse(e)}catch{return e}}function Dn(e,t){return[...t.keys()].filter(n=>n.startsWith("icbm__")&&t.get(n)!==null).map(n=>{const[,r]=n.split("__");return{key:r,value:Pn(t.get(n))}}).reduce((n,{key:r,value:o})=>({...n,[r]:o}),e)}const Ln=async(e,t)=>{const n=await In(t,e);return Dn(n,new URLSearchParams(t.location.search))},Bn=(e,t,n)=>{const r=yn(Ke(n)),o=pn(Se(e,t,"icLABradorGamKeyValues")),i=Nn(n);return{config:Object.keys(e).reduce((c,a)=>(c[a]=Se(e,t,a,r,o,i),c),{}),activeLabradorKeyValues:o.getLabradorKeyValues()}},xn={icPrebidIntentIQTimeout:500,icPrebidIntentIQVersion:"6.06-20240711",icPreferredCMP:"onetrust",icAdEngineWaitBeforeFirstAdsRequestMS:0,icAdEngineAuctionTimeoutMS:1500,icAdEngineOnCreateBiddersRequestsTimeoutMS:1510,icAdEngineBidderInitTimeoutMS:1005,icPrebidConfigUpdateTimeoutMS:1e3,icPrebidConsentManagementTimeoutMS:1500,icPrebidInitTimeoutMS:500},Mn=async(e,t,n)=>{const r=await Ln(e,n);return Bn(r,t,n)};async function $n(e,t,n){const r=On({device:t,geo:n}),{config:o,activeLabradorKeyValues:i}=await Mn(e,r,window);return{config:{...xn,...o},activeLabradorKeyValues:i}}const Un=()=>!0,H=(e,t,n={})=>{const r=M().registry,o=r[e]??(r[e]=[]),i={sampling:n.sampling??Un,requiresConsent:n.requiresConsent??!0},s=Object.assign(t,i);o.includes(s)||o.push(s)};function Fn(){var e,t,n;return((e=window.fandomCmp)==null?void 0:e.ready)===!0&&((t=window.fandomCmp)==null?void 0:t.allowed.ads)===!0&&((n=window.fandomCmp)==null?void 0:n.optOut)===!1}function de(e,t){return Fn()?e():t}const Vn=4e3,Qe="opted-out",zn=-1;function h(){return de(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.sessionId)??"unknown"},Qe)}function S(){return de(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.beaconId)??"unknown"},Qe)}function A(){return de(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.userId)??0},zn)}function y(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvNumber)??-1}function R(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvNumberGlobal)??-1}function p(){var e,t;return window.pvUID??((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvUID)??"unknown"}function Je(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.ppid)??"unknown"}function k(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.site)==null?void 0:t.siteId)??-1}function b(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.site)==null?void 0:t.siteName)??"unknown"}function v(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.lang)??"unknown"}function N(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.articleId)??-1}function Gn(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.monetizationTier)??-2}function _(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.app)==null?void 0:t.skin)??Le.UNKNOWN}function Ye(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.pageType)??"unknown"}function ue(){var e;return((e=window.RLCONF)==null?void 0:e.wgNamespaceNumber)??-1}function Hn(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.app)==null?void 0:t.env)??"unknown"}function qn(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.app)==null?void 0:t.brand)??De.UNKNOWN}function Wn(){return`${qn()}-${_()}`}function jn(){return typeof performance<"u"&&typeof performance.now=="function"?Math.round(performance.now()):-1}function ge(){return`${sn()} ${He()}`}const Kn="1.0.0";function le(){return Kn}function Qn(){return{pv_unique_id:p(),exp_bucket:w(),exp_bucket_v:Pt(),exp_bucket_2:Dt(),n:ue(),c:k(),a:N(),r:document.referrer,lc:v(),env:Hn(),tsto:jn(),tlv:le(),src:Wn()}}const Jn=({payload:e},t)=>{t("pageload",e)},Yn=({event:e,payload:t},n)=>{const r={s:_(),...t,u:A(),beacon:S(),session_id:h(),pv_unique_id:p(),tlv:le()};n(e,r)},Xn=()=>{var e;return/[?&]ftl_debug=1($|&)/.test(((e=window==null?void 0:window.location)==null?void 0:e.search)??"")},me=(e,...t)=>{Xn()&&console.debug(`[FTL DEBUG]: ${e}`,...t)},J={},Zn="v1",fe=(e,t,n)=>{if(e<1||e>100)throw new Error("Sampling rate must be between 1 and 100");if(!t)return!1;n&&(t=n+":"+t),t=Zn+":"+t;const r=J[t]??xe(t);return J[t]=r,me("identifierBasedDeterministicSampler cache:",J),e>=r},Xe=e=>{if(e<1||e>100)throw new Error("Sampling rate must be between 1 and 100");return e/100>=Math.random()},er=(e,t,n)=>r=>{if(!r)return!1;const o=e.find(s=>t(s,r)),i="ruleBasedSampler:complementaryId="+(n==null?void 0:n(r));if(!o)return!0;switch(o.binding){case I.SESSION:return et(o.rate,i);case I.BEACON:return Ze(o.rate,i);case I.PAGEVIEW:return tt(o.rate,i);case I.REQUEST:return Xe(o.rate);default:return At(o.binding),!0}},tr=(e,t)=>n=>{if(!n)return!1;const r="basicSampler:eventName="+(n==null?void 0:n.event);switch(t.toLowerCase()){case I.SESSION:return et(e,r);case I.BEACON:return Ze(e,r);case I.PAGEVIEW:return tt(e,r);case I.REQUEST:return Xe(e);default:return!0}},Ze=(e,t)=>{var n,r;return fe(e,(r=(n=window==null?void 0:window.fandomContext)==null?void 0:n.tracking)==null?void 0:r.beaconId,t)},et=(e,t)=>{var n,r;return fe(e,(r=(n=window==null?void 0:window.fandomContext)==null?void 0:n.tracking)==null?void 0:r.sessionId,t)},tt=(e,t)=>{var n,r;return fe(e,((r=(n=window==null?void 0:window.fandomContext)==null?void 0:n.tracking)==null?void 0:r.pvUID)??(window==null?void 0:window.pvUID),t)},nr=[],rr=(e,t)=>e.category===t.payload.category&&e.component===t.payload.component&&(e.action==="*"||e.action===t.payload.action),or=e=>e.payload.category,ir=er(nr,rr,or),sr=()=>{H(ie.PAGE_LOAD,Jn,{requiresConsent:!1}),H(Re.SHORT_LIVED_TRACKING_EVENT,Yn,{sampling:ir})};function ar(){return"https://beacon.wikia-services.com/__track/special/"}const nt=(e,t,n)=>{const r=new URL(e);Object.entries(t).forEach(([o,i])=>{r.searchParams.set(o,String(i))}),$e(r.toString(),Vn,{mode:"no-cors",keepalive:!0}).catch(o=>C({message:(n==null?void 0:n.errorMessage)??"Failed to send tracking request",priority:d.P4,error:o,code:Gt}))},cr=(e,t)=>{const n=`${ar()}${e}`;nt(n,t,{errorMessage:"Failed to send request to Beacon service"})},dr=e=>{let t;return()=>(t!==void 0||(t=Math.random()*100<e),t)},ur=({event:e,payload:t},n)=>{if(!t.category||!t.component||!t.action){me(`basicSender: Missing required payload fields for event "${e}". Category: "${t.category}", Component: "${t.component}", Action: "${t.action}". Event not sent.`);return}const r={s:_(),...t,u:A(),beacon:S(),session_id:h(),pv_unique_id:p(),tlv:le()};n(e,r)},rt=(e,t={requiresConsent:!0})=>{const n={};if(t.sampling&&(t.sampling.rate<1||t.sampling.rate>100))throw new Error("Sampling rate must be between 1 and 100");return t.sampling&&(n.sampling=tr(t.sampling.rate,t.sampling.binding)),t.requiresConsent!==void 0&&(n.requiresConsent=t.requiresConsent),{event:e,callback:(o,i)=>{ur(o,i)},options:n}},ot=(e,t={requiresConsent:!0})=>{if(it(e))return;const{event:n,callback:r,options:o}=rt(e,t);H(n,r,o)},gr=(e,t={requiresConsent:!0})=>(it(e,!1)||ot(e,t),n=>{W(e,n)}),it=(e,t=!0)=>M().registry[e]!=null?(t&&me('Tracker already registered for event "{eventType}", skipping duplicate registration.',{eventType:e}),!0):!1;function lr(){sr(),W(ie.PAGE_LOAD,Qn())}function mr(){return"v187"}function fr(e){return e.type==="error"}function pr(e){return e.type==="degradation"}function _r(e,t){return e<=t}function wr(){var e,t,n;return((n=(t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.opts)==null?void 0:n.noAdsReasons)??[]}function hr(e){return e.type===void 0&&(console.warn("Invalid usage of issue, the issue type is missing",e),e.type="error"),{type:e.type,timestamp:new Date,performanceMark:e.performanceMark??performance.mark(e.message),error:void 0,inPageStatus:!1,...e,data:e.data}}const Er=new Map([[d.P1,"fatal"],[d.P2,"error"],[d.P3,"warning"],[d.P4,"log"]]);function vr(){return new Promise(e=>{window.fandomSentry?e(window.fandomSentry):window.addEventListener("fandomSentryLoaded",()=>{e(window.fandomSentry)})})}async function Sr(e){(await vr()).withScope(n=>{var r;n.setTag("Environment",B()),n.setTag("priority",e.priority),n.setTag("adengpagestatus",e.inPageStatus?"true":"false"),n.setTag("configVersion",((r=window.fandomAdsSlotsConfig)==null?void 0:r.version)??"unknown"),n.setLevel(kr(e.priority)),n.setTransactionName(Tr(e)),n.captureException(e.error)})}function kr(e){return Er.get(e)??"error"}function Tr(e){let t="no error";return e.error instanceof Error&&(t=`${e.error.name} - ${e.message}`),`[${e.priority} ${e.type}] ${e.message} (${t})`}const Y={error:{p1:1,p2:.5,p3:0,p4:0},degradation:{p1:1,p2:.1,p3:0,p4:0}};class br{constructor(t={}){m(this,"sentrySampleSettings");m(this,"queryOverride");this.sentrySampleSettings=this.mergeSampleSettings(t.sentrySampleOverrides),this.queryOverride=ae("force_sentry_send")}mergeSampleSettings(t){try{const n=B(),{error:r={},degradation:o={}}=(t==null?void 0:t[n])??{};return{error:{...Y.error,...r},degradation:{...Y.degradation,...o}}}catch(n){return C({code:Mt,priority:d.P3,message:"Error merging sample settings in SentryManager",error:n}),Y}}shouldSendToSentry(t){if(this.queryOverride)return!0;if(t.inPageStatus===!1)return!1;const n=this.sentrySampleSettings[t.type][t.priority];return Math.random()<n}handleIssue(t){this.shouldSendToSentry(t)&&Sr(t)}}const q=class q{constructor(t){m(this,"errorLog",[]);m(this,"degradationLog",[]);m(this,"cleanups",[]);m(this,"logPrefix","[Odyssey]");m(this,"eventSent",!1);m(this,"minLoggingLevel");m(this,"sentryManager");var n;this.minLoggingLevel=t.minLoggingLevel??d.P2;try{this.sentryManager=new br({sentrySampleOverrides:(n=window.icbm)==null?void 0:n.config.icSentrySampleOverrides}),this.sendOnSchedule(),this.sendOnPageHidden()}catch(r){console.error(`${this.logPrefix} IssueManager had a failure while initializing:`,r)}}sendOnSchedule(){if(this.eventSent)return;const t=setTimeout(()=>{this.eventSent||this.triggerPageStatus({trigger:"timeout"})},q.PAGE_STATUS_TIMEOUT_MS);this.cleanups.push(()=>clearTimeout(t))}sendOnPageHidden(){if(this.eventSent)return;const t=()=>{this.eventSent||document.visibilityState==="hidden"&&this.triggerPageStatus({trigger:"page_hidden"})};document.addEventListener("visibilitychange",t),this.cleanups.push(()=>document.removeEventListener("visibilitychange",t))}triggerPageStatus(t){this.eventSent||(this.eventSent=!0,this.cleanups.forEach(n=>n()),this.sendPageStatus(t))}handleIssue(t){var r;const n=hr(t);this.printIssue(t),pr(n)?this.handleDegradation(n):fr(n)&&this.handleError(n),n.inPageStatus=!this.eventSent,(r=this.sentryManager)==null||r.handleIssue(n)}handleDegradation(t){this.degradationLog.push(t)}handleError(t){this.errorLog.push(t)}printIssue(t){_r(t.priority,this.minLoggingLevel)&&console.warn(`${this.logPrefix} [${t.priority}]: ${t.message}`,t.error,t.data)}errorCount(t){return this.errorLog.filter(n=>n.priority===t).length}degradationCount(t){return this.degradationLog.filter(n=>n.priority===t).length}getCombinedAndSortedIssueCodes(){return[...this.errorLog,...this.degradationLog].map(t=>t.code).sort()}sendPageStatus(t){const n=t.trigger!=="no_ads",r={event:re.ADENGPAGESTATUS,payload:{deploymentEnvironment:B(),eventTrigger:t.trigger,errors:{p1:this.errorCount(d.P1),p2:this.errorCount(d.P2),p3:this.errorCount(d.P3),p4:this.errorCount(d.P4)},degradations:{p1:this.degradationCount(d.P1),p2:this.degradationCount(d.P2),p3:this.degradationCount(d.P3),p4:this.degradationCount(d.P4)},monetizationStatus:n?"ads":"no_ads",monetizationReasons:n?[]:wr(),monetizationTier:Lt(),issueCodes:this.getCombinedAndSortedIssueCodes(),statusChecks:{firstAuctionTimedOut:!1,helixTargetingIncluded:!0}}};return W(r.event,r.payload),r}reset(){for(const t of this.cleanups)t();this.cleanups.length=0,this.errorLog.length=0,this.degradationLog.length=0,this.eventSent=!1;try{this.sendOnSchedule(),this.sendOnPageHidden()}catch(t){this.handleError({message:"IssueManager: error during reset re-initialization",priority:d.P3,error:t,type:"error",code:Ft})}}};m(q,"PAGE_STATUS_TIMEOUT_MS",3e4);let ne=q;const be=3;class Ar{constructor(){m(this,"detectedSignals",[]);m(this,"weight",0);m(this,"defaultConfig",{threshold:be,weights:{bt:be+1,nodeMissing:3,scriptBlocked:1,adTechFetch:1,initCheckTimeout:1}})}update(t){const n=this.getWeightForReason(t.reason);if(t.suspected)this.detectedSignals.push(t.reason),this.weight+=n;else{const r=this.detectedSignals.indexOf(t.reason);r!==-1&&this.detectedSignals.splice(r,1),this.weight-=n}}get(){const t=this.weight>=this.defaultConfig.threshold,n=[...new Set(this.detectedSignals)].sort();return{adBlockSuspected:t,adBlockReasons:n}}getWeightForReason(t){const{weights:n}=this.defaultConfig,r=this.getAdBlockWeightKey(t);return n[r]??1}getAdBlockWeightKey(t){return t.startsWith("adTechFetch:")?"adTechFetch":t}}class Ir{constructor(){m(this,"adBlockDataPromise",Promise.withResolvers());m(this,"adBlockState",new Ar);this.runInitChecks(),this.registerBlockthroughListener()}adBlockSuspected(t){this.adBlockState.update(t);const{adBlockSuspected:n,adBlockReasons:r}=this.adBlockState.get();this.updateWindow(n,r)}async runInitChecks(){let t=[];try{t=await Xt([this.checkForScriptBlock("gumgum","https://g2.gumgum.com/hbid/imp?displaymanager=Prebid.js")],5e3)}catch{t=[{status:"fulfilled",value:{suspected:!0,reason:"initCheckTimeout"}}]}for(const o of t)o.status==="fulfilled"?o.value.suspected&&this.adBlockState.update(o.value):L({code:qt,message:"Error running an AdBlockManager check",priority:d.P3});const{adBlockSuspected:n,adBlockReasons:r}=this.adBlockState.get();this.updateWindow(n,r)}updateWindow(t,n){window.fandomHost=window.fandomHost??{adBlockSuspected:void 0,adBlockReasons:[]},window.fandomHost.adBlockSuspected=t,window.fandomHost.adBlockReasons=n,this.adBlockDataPromise.resolve(()=>({adBlockSuspected:window.fandomHost.adBlockSuspected,adBlockReasons:window.fandomHost.adBlockReasons}))}async checkForScriptBlock(t,n){let r;try{await fetch(n,{method:"HEAD"}),r=!1}catch{r=!0}return{suspected:r,reason:`adTechFetch:${t}`}}getAdBlockData(){return this.adBlockDataPromise.promise}registerBlockthroughListener(){window.addEventListener("AcceptableAdsInit",t=>{const n=t.detail;typeof n=="boolean"&&this.adBlockSuspected({suspected:n,reason:"bt"})})}}const Cr=()=>{try{return window.self!==window.top}catch{return!0}},yr=["metacritic.com","fandom.com","fandom-dev.pl","fandom-dev.us"],Rr=async()=>{const e=yr.some(t=>window.location.hostname.includes(t));return Cr()||!e},Nr=()=>Promise.all([en(),Zt()]);class Or{constructor(){m(this,"cmd",[]);m(this,"onReady",Nr());const t=M();this.cmd=t.cmd,ee(this),It(t.q,this.executeTracking.bind(this))}executeTracking(t){var r,o;const n=(o=(r=window.fandomTrack)==null?void 0:r.registry)==null?void 0:o[t.event];if(!n||n.length===0){L({code:Ht,message:"Unhandled tracking event",priority:d.P4,data:t});return}n.forEach(i=>this.trackEvent(i,t))}trackEvent(t,n){const r=()=>{t.sampling(n)&&t(n,cr)};if(!t.requiresConsent)return r();this.onReady.then(r)}registerTracker(t,n,r){H(t,n,r)}createBasicTracker(t,n){return rt(t,n)}createAndRegisterBasicTracker(t,n){ot(t,n)}buildBasicTrackingFunction(t,n){return gr(t,n)}}function st(){return(["fandom.com","metacritic.com"].find(n=>window.location.hostname.includes(n))?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)??["us"])[0]+"/").replace(/\/+$/,"")}const X=new Map;function Pr(e){var o,i;if(ae("force_tracking"))return!0;const t=X.get(e);if(t!==void 0)return t;const n=(i=(o=window.icbm)==null?void 0:o.config)==null?void 0:i.odysseyPrometheusSenderTrafficLimiter;if((n==null?void 0:n[e])===void 0)return X.set(e,!0),!0;const r=Math.random()*100<n[e];return X.set(e,r),r}function pe(e,t){if(!Pr(e))return;const n=[st(),"adeng","api","adengine","meter",e].join("/");let r=se();r===Ue&&(r="fandom");const o=`${r}_odyssey`;nt(`${n}?app=${o}`,t,{errorMessage:"Failed to send adengine metrics"})}function Dr({payload:e},t){const n=e.slotName?`_${e.slotName}`:"",r=t??e.type;pe("time",{action:`${r}${n}`,duration:Math.round(e.time)})}const Lr=/\./g;function at(e){return e.replace(Lr,"_")}function Br({event:e,payload:t,alias:n}){const r=n??e,o=t.slotName?`_${t.slotName}`:"",i={action:`${r}${o}`,duration:Math.round(t.time)};pe("time",i),ct(i)}function xr(e){const n={action:at(e.name),duration:Math.round(e.duration)};pe("time",n),ct(n)}function ct(e){W(V,{type:l.PERFORMANCE_MARK,eventName:e.action,time:e.duration})}const Mr={[f.AE_FIRST_LINE_EXEC]:{},[f.AE_AFTER_INIT_PLUGINS]:{},[f.AE_AFTER_GPT_WRAPPER_INIT]:{},[f.AE_AD_ENGINE_INIT]:{},[f.AE_ON_BIDDERS_INIT]:{},[f.AE_AUCTION_START]:{onlyFirstRender:!0,duration:{start:f.AE_FIRST_LINE_EXEC,name:z.AE_DURATION_TO_BID}},[f.AE_CONFIG_CALLBACK_COMPLETE]:{duration:{start:f.AE_CONFIG_CALLBACK_STARTED,name:z.AE_CONFIG_CALLBACK_DURATION}},[f.AE_AUCTION_END]:{onlyFirstRender:!0,duration:{start:f.AE_AUCTION_START,name:z.AE_AUCTION_DURATION}},[f.AE_BEFORE_FIRST_CALL_ADS_REQUEST]:{},[f.AE_GPT_SLOT_REQUESTED_INITIAL]:{slotName:"top_leaderboard"},[f.AE_GPT_SLOT_RESPONSE_RECEIVED_INITIAL]:{slotName:"top_leaderboard"},[f.AE_GPT_SLOT_RENDERED_ENDED_INITIAL]:{slotName:"top_leaderboard"},[f.AE_GPT_SLOT_SLOT_ONLOAD_INITIAL]:{slotName:"top_leaderboard"}};class $r{constructor(){m(this,"eligiblePerformanceMarks",Mr);m(this,"eligibleEvents",[l.AE_INIT,l.SLOT_REQUESTED,l.SLOT_RENDERED,l.CREATIVE_RENDERED]);m(this,"performanceObserver");this.performanceObserver=this.createPerformanceObserver(),this.startPerformanceObserver(this.performanceObserver),this.registerTrackers()}createPerformanceObserver(){return new window.PerformanceObserver((t,n)=>{this.trackPerformanceMarks(t),this.disconnectPerformanceObserver(n)})}startPerformanceObserver(t){t.observe({type:"mark",buffered:!0})}disconnectPerformanceObserver(t){setTimeout(()=>{t.disconnect()},6e4)}registerTrackers(){M().cmd.push(t=>{t.registerTracker(l.CREATIVE_RENDERED,({payload:n})=>this.trackEvent({event:V,payload:{...n,type:l.CREATIVE_RENDERED}})),t.registerTracker(V,this.trackEvent.bind(this))})}trackEvent(t){this.eligibleEvents.includes(t.payload.type)&&(this.performanceMarkEvent(t),Dr(t,this.getAlias(t.payload.type)))}performanceMarkEvent({payload:t}){switch(t.type){case l.AE_INIT:performance.mark(`odyssey_${t.type}`);break;case l.SLOT_REQUESTED:case l.SLOT_RENDERED:performance.mark(`odyssey_${t.slotName}_${t.type}`);break}}getAlias(t){return{[l.AE_INIT]:void 0,[l.SLOT_REQUESTED]:"request",[l.SLOT_RENDERED]:"render",[l.VENDOR_TIME_UPDATE]:void 0,[l.CREATIVE_RENDERED]:void 0,[l.PERFORMANCE_MARK]:void 0}[t]}trackPerformanceMarks(t){t.getEntriesByType("mark").forEach(r=>{if(r){const o=this.transformEligiblePerformanceMark(r);o&&(Br(o),this.trackDurations(r))}})}trackDurations(t){try{const n=this.eligiblePerformanceMarks[t.name];if(n&&n.duration){const r=this.findMatchingStartMark(n.duration.start,t);if(!r){C({code:$t,message:`Could not measure performance duration: no matching start mark found for ${t.name}`,priority:d.P3});return}const o=performance.measure(n.duration.name,{start:r.startTime,end:t.startTime});xr(o)}}catch{C({code:Ut,message:"Could not measure performance duration",priority:d.P3})}}findMatchingStartMark(t,n){const r=performance.getEntriesByName(t,"mark");if(r.length)return n.name!=f.AE_AUCTION_END?r[r.length-1]:r.find(o=>{var i,s;return((i=o.detail)==null?void 0:i.auctionId)===((s=n.detail)==null?void 0:s.auctionId)})}transformEligiblePerformanceMark(t){var c;const n=this.eligiblePerformanceMarks[t.name];if(n===void 0||this.abortRefreshMark(n,t))return;const r=Math.round(t.startTime),o=at(t.name),i=n.slotName!==void 0,s=i?(c=t.detail)==null?void 0:c.slotId:void 0;if(!(i&&n.slotName!==s))return{event:t.name,payload:{time:r,...i&&{slotName:s}},alias:o}}abortRefreshMark(t,n){var o;if((t==null?void 0:t.onlyFirstRender)!=!0)return!1;const r=(o=n.detail)==null?void 0:o.renderCycleCount;return r?r>1:(L({code:Wt,message:`${n.name} is missing a renderCycleCount`,priority:d.P4}),!0)}}const K=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null));function dt(e){var t,n,r;return((t=window.fandomCmp)==null?void 0:t.ready)===!0&&((n=window.fandomCmp)==null?void 0:n.allowed.ads)===!0&&((r=window.fandomCmp)==null?void 0:r.consentApi)===e}function ut(){var e;return dt("tcf")?((e=window.fandomCmp)==null?void 0:e.optOut)===!1?P.YES:P.NO:P.NOT_APPLICABLE}function gt(){var e;return dt("usp")?((e=window.fandomCmp)==null?void 0:e.optOut)===!0?P.YES:P.NO:P.NOT_APPLICABLE}function lt(){var e,t,n;return((n=(t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.targeting)==null?void 0:n.wikiVertical)??"unknown"}async function Ur(e,t){var c,a,u,g,E;const n=new Date,r=window.fandomHost.geo,o=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),i=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,s=(g=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&g.length?window.fandomHost.adBlockReasons.join(";"):void 0;return{ad_status:mt(e.type),timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),device:j(),country:r.country,region:r.region,lang:v(),slot_id:_t(e,t),slot_size:"",kv_pos:e.slotName,kv_rv:wt(e),kv_s0v:lt(),kv_s1:`_${b()}`,kv_s2:Ye(),kv_skin:_(),ppid:Je(),page_width:window.document.body.scrollWidth.toString(),viewport_height:pt(window.innerHeight),rollout_tracking:ft(),opt_in:ut(),is_uap:0,opt_out_sale:gt(),session_id:h(),pv_number:y(),pv_number_global:R(),pv_unique_id:p(),beacon:S(),c:k(),x:b(),lc:v(),s:_(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w(),browser:ge(),odyssey_version:((E=window.fandomAds)==null?void 0:E.version)??"unknown",proxy_page_suspected:o,ad_block_suspected:i,ad_block_reasons:s,deployment_environment:B()}}async function Fr(e,t){var c,a,u,g,E;const n=new Date,r=window.fandomHost.geo,o=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),i=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,s=(g=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&g.length?window.fandomHost.adBlockReasons.join(";"):void 0;return{ad_status:mt(e.type),timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),device:j(),country:r.country,region:r.region,lang:v(),advertiser_id:zr(e),creative_id:Gr(e),product_lineitem_id:Hr(e),order_id:qr(e),slot_id:_t(e,t),slot_size:Wr(e),kv_pos:e.slotName,kv_rv:wt(e),kv_s0v:lt(),kv_s1:`_${b()}`,kv_s2:Ye(),kv_skin:_(),ppid:Je(),page_width:window.document.body.scrollWidth.toString(),viewport_height:pt(window.innerHeight),rollout_tracking:ft(),opt_in:ut(),is_uap:0,opt_out_sale:gt(),session_id:h(),pv_number:y(),pv_number_global:R(),pv_unique_id:p(),beacon:S(),c:k(),x:b(),lc:v(),s:_(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w(),browser:ge(),odyssey_version:((E=window.fandomAds)==null?void 0:E.version)??"unknown",proxy_page_suspected:o,ad_block_suspected:i,ad_block_reasons:s,deployment_environment:B()}}const Vr=e=>async(t,n)=>{let r;bt(t.payload)?r=await Ur(t.payload,e):r=await Fr(t.payload,e),n(t.event,K(r))};function mt(e){return e.toString().replace("_info","")}function ft(){return window.OneTrust!==void 0?"1T":"toi"}function pt(e){return e??0}function zr(e){var t;return`${((t=e.slotInfo)==null?void 0:t.advertiserId)??""}`}function Gr(e){var t;return`${((t=e.slotInfo)==null?void 0:t.creativeId)??""}`}function Hr(e){var t;return`${((t=e.slotInfo)==null?void 0:t.lineItemId)??""}`}function qr(e){var t;return`${((t=e.slotInfo)==null?void 0:t.orderId)??""}`}function _t(e,t){const n=e.slotName??"unknown";return t.getUid(n)}function Wr(e){var t,n;return(t=e.slotInfo)!=null&&t.selectedSize?e.slotInfo.selectedSize:(n=e.slotInfo)!=null&&n.configuredSizes?e.slotInfo.configuredSizes.join(","):""}function wt(e){return e.rv??-1}const jr={[l.AE_INIT]:{type:"load_times",beaconEventName:"load_time_init"},[l.SLOT_REQUESTED]:{type:"load_times",beaconEventName:"requested"},[l.SLOT_RENDERED]:{type:"load_times",beaconEventName:"loaded"}},Ae=async({event:e,payload:t},n)=>{var g,E,$,U,O;const r=new Date,o=window.fandomHost.geo,i=await((g=window.fandomHost)==null?void 0:g.proxyPageSuspected),s=jr[t.type],c=(E=window.fandomHost)==null?void 0:E.adBlockSuspected,a=(U=($=window.fandomHost)==null?void 0:$.adBlockReasons)!=null&&U.length?window.fandomHost.adBlockReasons.join(";"):void 0,u={event_name:Kr(t,s),browser_ts:r.getTime(),load_time:Math.round(t.time),tz_offset:r.getTimezoneOffset(),country:o.country,session_id:h(),pv_unique_id:p(),c:k(),s:_(),exp_bucket:w(),proxy_page_suspected:i,odyssey_version:((O=window.fandomAds)==null?void 0:O.version)??"unknown",ad_block_suspected:c,ad_block_reasons:a,deployment_environment:B()};n(e,K(u))};function Kr(e,t){return`${e.slotName?`${e.slotName}_`:""}${(t==null?void 0:t.beaconEventName)??e.eventName??e.type}`}function Qr(e,t,n,r,o){var i;return{status:Yr(e),name:Xr(e),rv:oo(e),auction_id:e.bidInfo.auctionId??"",rejection_reason:e.bidInfo.rejectionReason??"",odyssey_version:((i=window.fandomAds)==null?void 0:i.version)??"unknown",response_time:to(e),size:Zr(e),price:eo(e),additional_flags:ro(e),slot_id:t.getUid(e.slotName),pos:e.baseSlotName,pv_number:y(),pv_number_global:R(),pv_unique_id:p(),c:k(),s:_(),exp_bucket:w(),proxy_page_suspected:n,ad_block_suspected:r,ad_block_reasons:o,full_auction:io(e),deployment_environment:B()}}const Jr=e=>async({payload:t},n)=>{var c,a,u,g;const r=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),o=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,i=(g=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&g.length?window.fandomHost.adBlockReasons.join(";"):void 0,s=Qr(t,e,r,o,i);n("adengbidders",K(s))};function Yr(e){var t,n,r;return(t=e.bidInfo)!=null&&t.status?e.bidInfo.status:((n=e.bidInfo)==null?void 0:n.timedOut)===!0?"timedout":((r=e.bidInfo)==null?void 0:r.timedOut)===!1?"on_time":"unknown"}function Xr(e){var t;return((t=e.bidInfo)==null?void 0:t.bidderName)??"unknown"}function Zr(e){var t;return((t=e.bidInfo)==null?void 0:t.size)??"unknown"}function eo(e){var t;return((t=e.bidInfo)==null?void 0:t.price)??"unknown"}function to(e){var t;return((t=e.bidInfo)==null?void 0:t.timeToRespond)??0}function no(e){var t,n,r;(t=e==null?void 0:e.bidInfo)!=null&&t.buyerId&&((r=e.flags)==null||r.push(`buyer_id=${(n=e.bidInfo)==null?void 0:n.buyerId}`))}function ro(e){return e.flags=[],no(e),(e.flags??[]).join(";")}function oo(e){return e.rv??-1}function io(e){var t;return((t=e.bidInfo)==null?void 0:t.fullAuction)===!0?"yes":"no"}const ht="error",so=e=>({event:t,payload:n},r)=>{const o=window.fandomHost.geo,i=Z(n),s={slot_size:_o(n),real_ad_size:po(i),requested_sizes:wo(n),slot_id:e.getUid(Z(n)),position:Z(n),country_code:o.country,region:o.region,rv:ho(n),...ao(n),session_id:h(),pv_number:y(),pv_number_global:R(),pv_unique_id:p(),beacon:S(),c:k(),x:b(),lc:v(),s:_(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w()};r(t,s)};function ao(e){const t=e.slotInfo??{};return{advertiser_id:`${t.advertiserId??""}`,creative_id:`${t.creativeId??""}`,line_item_id:`${t.lineItemId??""}`,order_id:`${t.orderId??""}`}}function co(e){return uo(e)??lo(e)}function uo(e){const t=go(e);if(!t)return;const{offsetHeight:n,offsetWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function go(e){var t,n,r;return(r=(n=(t=document.querySelector(`#${e} [id*='google_ads_iframe_\\/5441'] iframe`))==null?void 0:t.contentWindow)==null?void 0:n.document)==null?void 0:r.querySelector("html")}function lo(e){var o;const t=(o=document.querySelector(`#${e} [id*='google_ads_iframe_\\/5441'] div`))==null?void 0:o.firstElementChild;if(!t)return;const{clientHeight:n,clientWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function mo(e){const t=document.getElementById(e);return{width:(t==null?void 0:t.offsetWidth)??0,height:(t==null?void 0:t.offsetHeight)??0}}function fo(e){const t=document.querySelector(`#${e} iframe`);if(!t)return;const{clientHeight:n,clientWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function po(e){const t=CSS.escape(e),{width:n,height:r}=fo(t)??co(t)??mo(t);return!n||!r?"unknown":`${n}x${r}`}function _o(e){var t,n;return((t=e.slotInfo)==null?void 0:t.selectedSize)===null?"unknown":(n=e.slotInfo)!=null&&n.selectedSize?e.slotInfo.selectedSize:ht}function wo(e){try{const t=e.slotInfo.parsedSizes.join(",");return t===""?"unknown":t}catch{return ht}}function Z(e){return e.slotName??"unknown"}function ho(e){return e.rv??-1}const Eo=async({payload:e},t)=>{var s;const n=new Date,r=await qe(D);if(vo(e)==="")return;const i={timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),prop_value:((s=e.flags)==null?void 0:s.join(";"))??"",country:r.country,session_id:h(),pv_number:y(),pv_number_global:R(),pv_unique_id:p(),beacon:S(),c:k(),x:b(),lc:v(),s:_(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w()};t("adenglabradorinfo",i)};function vo(e){var t;return((t=e.flags)==null?void 0:t.join(";"))??""}const So=({event:e=oe.TRACKING_EVENT,payload:t},n)=>{const r={...t,url:document.URL,session_id:h(),pv_number:y(),pv_number_global:R(),pv_unique_id:p(),beacon:S(),c:k(),x:b(),lc:v(),s:Et(),ua:window.navigator.userAgent,u:A(),a:N(),n:-1,exp_bucket:w()};n(e,r)};function Et(){return`ucp_${j()==="smartphone"?"mobile":"desktop"}`}const ko=({payload:e},t)=>{const n={partner_name:e.partnerName,partner_identity_id:e.partnerIdentityId,pv_unique_id:p(),session_id:h(),beacon:S(),ua:window.navigator.userAgent,s:Et()};t("identityinfo",n)},To=({payload:e},t)=>{const n=new Date,r={tag_name:e.tagName,event_name:e.eventName,event_details:e.eventDetails,start_time:e.startTime,monetization_tier:Gn(),wiki_vars:e.wikiVars,env:e.env,software_version:e.softwareVersion,exp_data:e.expData,c:k(),n:ue(),a:N(),s:_(),beacon:S(),session_id:h(),pv_unique_id:p(),pv_number:y(),pv_number_global:R(),exp_bucket:w(),browser_ts:n.getTime(),tz_offset:n.getTimezoneOffset(),u:A(),x:b(),lc:v(),ua:window.navigator.userAgent};t("component_performance",r)},bo=async({payload:e},t)=>{var r;const n={...Ao(e),...await Io(),...Co(),...yo(),...Ro(),browser:ge(),odyssey_version:((r=window.fandomAds)==null?void 0:r.version)??"unknown",reset_count:Bt()};t("adengpagestatus",K(n))};function Ao(e){return{event_trigger:e.eventTrigger,deployment_environment:e.deploymentEnvironment,monetization_status:e.monetizationStatus,monetization_reasons:e.monetizationReasons.join(";"),monetization_tier:e.monetizationTier??void 0,p1_error_count:e.errors.p1,p2_error_count:e.errors.p2,p3_error_count:e.errors.p3,p4_error_count:e.errors.p4,p1_degradation_count:e.degradations.p1,p2_degradation_count:e.degradations.p2,p3_degradation_count:e.degradations.p3,p4_degradation_count:e.degradations.p4,status_first_auction_timed_out:e.statusChecks.firstAuctionTimedOut??void 0,status_helix_targeting_included:e.statusChecks.helixTargetingIncluded??void 0,issue_codes:e.issueCodes.join(";")}}async function Io(){var i,s,c;const[e,t]=await Promise.all([(i=window.fandomHost)==null?void 0:i.adBlockData,(s=window.fandomHost)==null?void 0:s.proxyPageSuspected]),n=e==null?void 0:e(),r=(c=n==null?void 0:n.adBlockReasons)==null?void 0:c.join(";"),o={ad_block_suspected:n==null?void 0:n.adBlockSuspected,proxy_page_suspected:t};return r&&(o.ad_block_reasons=r),o}function Co(){return{pv_number:y(),pv_number_global:R(),pv_unique_id:p()}}function yo(){return{c:k(),x:b(),lc:v(),s:_(),a:N()}}function Ro(){return{session_id:h(),beacon:S(),ua:window.navigator.userAgent,u:A(),n:-1,exp_bucket:w()}}class No{constructor(t={}){this.map=t}generateUidForSlot(t){this.map[t]=crypto.randomUUID()}getUid(t){return this.map[t]!==void 0?this.map[t]:(this.generateUidForSlot(t),this.getUid(t))}}function Oo(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}async function Po({payload:e},t){const n=new Date,r={"wiki-article":"wa",widget:"wg"},o=Oo(e.recommendations,10),i={event_name:e.eventName,env:e.env,sft_v:e.softwareVersion,exp_d:e.expData,act:e.action,cat:e.category,cmp:e.component,trk_m:e.trackingMethod,b2:e.b2,c_id:e.contextContentId,c_t:e.contextContentType,c_sp:e.contextSpecialPage,w_id:e.widgetId,wl_id:e.widgetLocationId,w_cnt:e.widgetContent,w_lyt:e.widgetLayout,c:k(),n:ue(),a:N(),s:_(),beacon:S(),session_id:h(),pv_unique_id:p(),pv_number:y(),pv_number_global:R(),exp_bucket:w(),b_ts:n.getTime(),tz_o:n.getTimezoneOffset(),u:A(),x:b(),lc:v(),ua:window.navigator.userAgent};await Promise.all(o.map(s=>{const a=s.map(g=>`${g.id}|${r[g.type]??g.type}|${g.position??""}`).join(","),u={...i,recs:a};return t("recommendation",u)}))}const G=100;function Do(e){var n,r;if(e==="adengbidders"||ae("force_tracking"))return G;const t=(r=(n=window.icbm)==null?void 0:n.config)==null?void 0:r.odysseyBeaconSenderTrafficLimiter;return(t==null?void 0:t[e])===void 0?G:t[e]}const T=e=>{const t=Do(e);return t===G?{}:{sampling:dr(t)}},Lo=()=>{const e=new No;M().cmd.push(t=>{t.registerTracker(kt,Vr(e),T("adengadinfo")),t.registerTracker(Ie.BIDDER_RESPONSE,Jr(e),T("adengbidders"));const n=T("adengloadtimes");t.registerTracker(l.CREATIVE_RENDERED,({payload:r},o)=>Ae({event:V,payload:{...r,type:l.CREATIVE_RENDERED}},o),n),t.registerTracker(V,(r,o)=>Ae(r,o),n),t.registerTracker(Tt,so(e),T("adengadsizeinfo")),t.registerTracker(ye.LABRADOR_KEYVALUES,Eo,T("adenglabradorinfo")),t.registerTracker(Ce.IDENTITY_INFO,ko,T("identityinfo")),t.registerTracker(oe.TRACKING_EVENT,So,T("trackingevent")),t.registerTracker(Ne.COMPONENT_PERFORMANCE_EVENT,To,T("component_performance")),t.registerTracker(Oe.RECOMMENDATION_EVENT,Po,T("recommendation")),t.registerTracker(re.ADENGPAGESTATUS,bo,T("adengpagestatus"))})},Bo=[st(),"adeng","api","external-log"].join("/"),xo=1;function Mo(e,t){const n=se(),r=p();if(!(xe(r)<=xo))return;const i={message:e,pvUID:r};for(const[s,c]of Object.entries(t))c&&(i[s]=c);fetch(`${Bo}?app=${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}ln();(async()=>{const e=se(),t=j(),n=await qe(D),r=He();window.icbm=await $n(e,t,n),window.dispatchEvent(new Event("instantConfigLoaded")),fn(D,n);const o=new Ir,i=new ne({});window.fandomHost={...window.fandomHost??{},app:e,device:t,icbm:window.icbm,geo:n,version:mr(),adBlockManager:o,adBlockData:o.getAdBlockData(),issueManager:i,browser:r,proxyPageSuspected:Rr(),reset:()=>{i.reset()}},new $r,Lo(),lr(),new Or,ee(window.fandomHost)})().catch(e=>{var t,n,r;if(window.fandomHost)try{ee(window.fandomHost)}catch{}Mo("[odyssey] host init error",{handled:1,error:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0,codes:(r=(n=(t=window.fandomHost)==null?void 0:t.issueManager)==null?void 0:n.getCombinedAndSortedIssueCodes())==null?void 0:r.join(";")})});
//# sourceMappingURL=main.js.map
